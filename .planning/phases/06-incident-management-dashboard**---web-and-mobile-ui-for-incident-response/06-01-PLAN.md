---
phase: 06-incident-management-dashboard
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - frontend/package.json
  - frontend/vite.config.ts
  - frontend/tsconfig.json
  - frontend/tailwind.config.js
  - frontend/src/main.tsx
  - frontend/src/App.tsx
  - frontend/src/lib/api.ts
  - frontend/src/lib/queryClient.ts
  - frontend/src/types/incident.ts
  - frontend/src/styles/globals.css
  - frontend/components.json
autonomous: true

must_haves:
  truths:
    - "Frontend project compiles without errors"
    - "Dev server starts and shows placeholder page"
    - "TanStack Query provider is configured"
    - "React Router handles /incidents and /incidents/:id routes"
  artifacts:
    - path: "frontend/package.json"
      provides: "Frontend dependencies and scripts"
      contains: "vite"
    - path: "frontend/vite.config.ts"
      provides: "Vite build configuration"
      contains: "react()"
    - path: "frontend/src/lib/queryClient.ts"
      provides: "TanStack Query configuration"
      exports: ["queryClient"]
    - path: "frontend/src/types/incident.ts"
      provides: "TypeScript types matching backend"
      contains: "interface Incident"
  key_links:
    - from: "frontend/src/main.tsx"
      to: "frontend/src/lib/queryClient.ts"
      via: "QueryClientProvider import"
      pattern: "QueryClientProvider"
    - from: "frontend/src/App.tsx"
      to: "react-router-dom"
      via: "Router configuration"
      pattern: "BrowserRouter|Routes"
---

<objective>
Set up the React frontend project with Vite, TypeScript, TanStack Query, and shadcn/ui foundation.

Purpose: Create the frontend infrastructure that all subsequent plans build upon. This establishes the build tooling, routing, state management, and component library foundation.

Output: A working frontend skeleton with dev server, type definitions, and core libraries configured.
</objective>

<execution_context>
@/Users/tvellore/.claude/get-shit-done/workflows/execute-plan.md
@/Users/tvellore/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/06-incident-management-dashboard**---web-and-mobile-ui-for-incident-response/06-CONTEXT.md
@.planning/phases/06-incident-management-dashboard**---web-and-mobile-ui-for-incident-response/06-RESEARCH.md

# Backend types to match
@prisma/schema.prisma
@src/routes/incident.routes.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Initialize Vite React TypeScript Project</name>
  <files>
    frontend/package.json
    frontend/vite.config.ts
    frontend/tsconfig.json
    frontend/tsconfig.node.json
    frontend/index.html
  </files>
  <action>
Create new frontend directory at project root. Initialize with Vite React TypeScript template:

```bash
npm create vite@latest frontend -- --template react-ts
cd frontend
npm install
```

Update package.json scripts:
- "dev": "vite --port 3001" (backend uses 3000)
- "build": "tsc && vite build"
- "preview": "vite preview"

Update vite.config.ts:
- Add path alias for '@' -> './src'
- Configure proxy for '/api' to http://localhost:3000 (backend)

Install additional dependencies:
```bash
npm install react-router-dom @tanstack/react-query sonner query-string
npm install -D @types/node
```
  </action>
  <verify>
cd frontend && npm run build -- --noEmit (TypeScript compiles)
cd frontend && timeout 5 npm run dev || true (dev server starts)
  </verify>
  <done>
Vite project created with TypeScript, dev server starts on port 3001, API proxy configured to backend.
  </done>
</task>

<task type="auto">
  <name>Task 2: Configure shadcn/ui and Tailwind CSS</name>
  <files>
    frontend/tailwind.config.js
    frontend/postcss.config.js
    frontend/src/styles/globals.css
    frontend/components.json
  </files>
  <action>
Initialize shadcn/ui in the frontend directory:

```bash
cd frontend
npx shadcn@latest init
```

When prompted:
- Style: Default
- Base color: Slate
- CSS variables: Yes

This will create:
- tailwind.config.js with shadcn/ui presets
- postcss.config.js
- components.json
- src/lib/utils.ts

Update frontend/src/styles/globals.css with Tailwind imports:
```css
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* CSS variables from shadcn init */
  }
}
```

Import globals.css in main.tsx.

Add initial shadcn/ui components:
```bash
npx shadcn@latest add button card skeleton badge
```

These provide foundation for incident cards, loading states, and priority badges.
  </action>
  <verify>
ls frontend/src/components/ui/button.tsx (shadcn button exists)
grep -q "@tailwind" frontend/src/styles/globals.css (Tailwind imported)
  </verify>
  <done>
shadcn/ui initialized with button, card, skeleton, and badge components. Tailwind CSS configured with design tokens.
  </done>
</task>

<task type="auto">
  <name>Task 3: Configure TanStack Query and Router with Type Definitions</name>
  <files>
    frontend/src/main.tsx
    frontend/src/App.tsx
    frontend/src/lib/api.ts
    frontend/src/lib/queryClient.ts
    frontend/src/types/incident.ts
    frontend/src/types/api.ts
    frontend/src/pages/DashboardPage.tsx
    frontend/src/pages/IncidentDetailPage.tsx
  </files>
  <action>
Create frontend/src/lib/queryClient.ts:
```typescript
import { QueryClient } from '@tanstack/react-query';

export const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      staleTime: 30 * 1000, // 30 seconds
      refetchOnWindowFocus: true,
      retry: 1,
    },
  },
});
```

Create frontend/src/lib/api.ts:
```typescript
const API_BASE = '/api';

export async function apiFetch<T>(
  endpoint: string,
  options?: RequestInit
): Promise<T> {
  const response = await fetch(`${API_BASE}${endpoint}`, {
    ...options,
    credentials: 'include',
    headers: {
      'Content-Type': 'application/json',
      ...options?.headers,
    },
  });

  if (!response.ok) {
    const error = await response.json().catch(() => ({ error: 'Unknown error' }));
    throw new Error(error.error || `HTTP ${response.status}`);
  }

  return response.json();
}
```

Create frontend/src/types/incident.ts with types matching Prisma schema:
```typescript
export type IncidentStatus = 'OPEN' | 'ACKNOWLEDGED' | 'RESOLVED' | 'CLOSED';
export type IncidentPriority = 'CRITICAL' | 'HIGH' | 'MEDIUM' | 'LOW' | 'INFO';

export interface Incident {
  id: string;
  fingerprint: string;
  status: IncidentStatus;
  priority: IncidentPriority;
  title: string;
  description?: string;
  metadata: Record<string, unknown>;
  teamId: string;
  team: { id: string; name: string };
  assignedUserId?: string;
  assignedUser?: { id: string; firstName: string; lastName: string; email: string };
  escalationPolicyId?: string;
  currentLevel: number;
  currentRepeat: number;
  createdAt: string;
  acknowledgedAt?: string;
  resolvedAt?: string;
  closedAt?: string;
  _count?: { alerts: number };
}

export interface TimelineEvent {
  id: string;
  action: string;
  timestamp: string;
  userId?: string;
  user?: { id: string; firstName: string; lastName: string };
  metadata?: Record<string, unknown>;
}

export interface IncidentListResponse {
  incidents: Incident[];
  nextCursor: string | null;
}
```

Create frontend/src/types/api.ts with filter types:
```typescript
export interface IncidentFilters {
  status?: string[];
  priority?: string[];
  teamId?: string;
  assignedUserId?: string;
}

export interface PaginationParams {
  limit?: number;
  cursor?: string;
}
```

Update frontend/src/main.tsx:
```typescript
import React from 'react';
import ReactDOM from 'react-dom/client';
import { QueryClientProvider } from '@tanstack/react-query';
import { BrowserRouter } from 'react-router-dom';
import { Toaster } from 'sonner';
import { queryClient } from './lib/queryClient';
import App from './App';
import './styles/globals.css';

ReactDOM.createRoot(document.getElementById('root')!).render(
  <React.StrictMode>
    <QueryClientProvider client={queryClient}>
      <BrowserRouter>
        <App />
        <Toaster position="top-right" />
      </BrowserRouter>
    </QueryClientProvider>
  </React.StrictMode>
);
```

Create frontend/src/App.tsx with routes:
```typescript
import { Routes, Route, Navigate } from 'react-router-dom';
import DashboardPage from './pages/DashboardPage';
import IncidentDetailPage from './pages/IncidentDetailPage';

export default function App() {
  return (
    <Routes>
      <Route path="/" element={<Navigate to="/incidents" replace />} />
      <Route path="/incidents" element={<DashboardPage />} />
      <Route path="/incidents/:id" element={<IncidentDetailPage />} />
    </Routes>
  );
}
```

Create placeholder pages:
- frontend/src/pages/DashboardPage.tsx - returns "Incidents Dashboard"
- frontend/src/pages/IncidentDetailPage.tsx - returns "Incident Detail: {id}"
  </action>
  <verify>
cd frontend && npm run build (TypeScript compiles with types)
grep -q "QueryClientProvider" frontend/src/main.tsx
grep -q "BrowserRouter" frontend/src/main.tsx
  </verify>
  <done>
TanStack Query and React Router configured. TypeScript types match backend Prisma schema. Placeholder pages render for /incidents and /incidents/:id routes.
  </done>
</task>

</tasks>

<verification>
1. `cd frontend && npm run build` - Compiles without TypeScript errors
2. `cd frontend && npm run dev` - Starts dev server on port 3001
3. Navigate to http://localhost:3001/incidents - Shows placeholder page
4. Check frontend/src/types/incident.ts matches Prisma Incident model
5. Verify Tailwind CSS is working (check for shadcn/ui component styles)
</verification>

<success_criteria>
- [ ] frontend/ directory exists with Vite project
- [ ] `npm run build` completes without errors
- [ ] Dev server starts on port 3001
- [ ] API proxy configured to backend on port 3000
- [ ] shadcn/ui components (button, card, skeleton, badge) available
- [ ] TanStack Query provider wraps app
- [ ] Routes configured for /incidents and /incidents/:id
- [ ] TypeScript types match backend Incident model
- [ ] Sonner toaster configured for notifications
</success_criteria>

<output>
After completion, create `.planning/phases/06-incident-management-dashboard**---web-and-mobile-ui-for-incident-response/06-01-SUMMARY.md`
</output>
